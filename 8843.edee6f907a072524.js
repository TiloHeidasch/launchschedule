"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8843],{8843:(k,v,s)=>{s.r(v),s.d(v,{OverviewPageModule:()=>B});var l=s(6895),y=s(433),a=s(9928),g=s(7006),t=s(1571),_=s(8815),w=s(7770),C=s(9411),m=s(5861),h=s(2340),T=s(529);let f=(()=>{class n{constructor(e){this.http=e,this.baseUrl=h.N.twitter}extractTwitterContent(e){var o=this;return(0,m.Z)(function*(){return o.extractBlockquote(yield o.getEmbedded(e))})()}getEmbedded(e){var o=this;return(0,m.Z)(function*(){const i=h.N.cors+o.baseUrl+"?url="+e+"&omit_script=true&hide_thread=false";return yield o.http.get(i).toPromise()})()}extractBlockquote(e){return e.html}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(T.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function x(n,r){if(1&n&&t._UZ(0,"div",4),2&n){const e=t.oxw();t.Q6J("innerHTML",e.twitterContent,t.oJD)}}function O(n,r){if(1&n&&(t.TgZ(0,"div")(1,"ion-item",5)(2,"ion-label"),t._uU(3),t.qZA()()()),2&n){const e=t.oxw();t.xp6(3),t.hij("Source: ",e.update.info_url,"")}}let Z=(()=>{class n{constructor(e){this.twitterService=e,this.isTwitter=!1}ngOnInit(){this.checkAndExtractTwitterContent()}checkAndExtractTwitterContent(){var e=this;return(0,m.Z)(function*(){e.isTwitter=e.update.info_url.startsWith("https://twitter.com/"),e.isTwitter&&(e.twitterContent=yield e.twitterService.extractTwitterContent(e.update.info_url))})()}toDate(e){return new Date(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-starship-update"]],inputs:{update:"update"},decls:9,vars:4,consts:[["secondary",""],["primary",""],[3,"innerHTML",4,"ngIf"],[4,"ngIf"],[3,"innerHTML"],["href","update.info_url"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-card-subtitle",0),t._uU(3),t.qZA(),t.TgZ(4,"ion-card-title",1),t._uU(5),t.qZA()(),t.TgZ(6,"ion-card-content"),t.YNc(7,x,1,1,"div",2),t.YNc(8,O,4,1,"div",3),t.qZA()()),2&e&&(t.xp6(3),t.Oqu(o.toDate(o.update.created_on).toLocaleString()),t.xp6(2),t.Oqu(o.update.comment),t.xp6(2),t.Q6J("ngIf",o.twitterContent),t.xp6(1),t.Q6J("ngIf",!o.twitterContent))},dependencies:[l.O5,a.PM,a.FN,a.Zi,a.tO,a.Dq,a.Ie,a.Q$],styles:["ion-card-subtitle[_ngcontent-%COMP%]{color:var(--ion-color-secondary)}"]}),n})();function P(n,r){if(1&n&&(t.TgZ(0,"div",6),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Oqu(e)}}const M=function(n,r,e){return{primary:n,secondary:r,inactive:e}};function S(n,r){if(1&n&&t._UZ(0,"div",11),2&n){const e=r.$implicit;t.Q6J("ngClass",t.kEZ(1,M,e.primary,e.secondary,e.inactive))}}function D(n,r){if(1&n&&(t.TgZ(0,"div",7)(1,"div",8),t.YNc(2,S,1,5,"div",9),t.qZA(),t.TgZ(3,"div",10),t._uU(4),t.qZA()()),2&n){const e=r.$implicit;t.xp6(2),t.Q6J("ngForOf",e.hours),t.xp6(2),t.hij(" ",e.label," ")}}function U(n,r){1&n&&(t.TgZ(0,"div",17),t._uU(1,"Primary"),t.qZA())}function A(n,r){1&n&&(t.TgZ(0,"div",18),t._uU(1,"Secondary"),t.qZA())}function F(n,r){if(1&n&&(t.TgZ(0,"div",12),t.YNc(1,U,2,0,"div",13),t.YNc(2,A,2,0,"div",14),t.TgZ(3,"div",15),t._uU(4),t.qZA(),t.TgZ(5,"div",16),t._uU(6),t.qZA()()),2&n){const e=r.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf","Primary Date"===e.title),t.xp6(1),t.Q6J("ngIf","Secondary Date"===e.title),t.xp6(2),t.Oqu(o.toDate(e.window_start).toLocaleDateString()),t.xp6(2),t.AsE("",o.toDate(e.window_start).toLocaleTimeString()," - ",o.toDate(e.window_end).toLocaleTimeString(),"")}}const J=function(){return["0:00","3:00","6:00","9:00","12:00","15:00","18:00","21:00"]};let R=(()=>{class n{constructor(){this.days=[]}ngOnInit(){this.createEmptyDayStructure(),this.prepareRoadClosureGraph()}prepareRoadClosureGraph(){this.days.forEach(e=>{e.hours.forEach(o=>{this.roadClosures.forEach(i=>{const c=new Date(i.window_start),u=new Date(i.window_end),d="Primary Date"===i.title,p="Secondary Date"===i.title;this.isInTimeFrame(o.date,c,u)&&(o.primary=d,o.secondary=p)})})})}isInTimeFrame(e,o,i){return e.getTime()>o.getTime()&&e.getTime()<=i.getTime()}createEmptyDayStructure(){const e=new Date;e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0);for(let o=0;o<7;o++){const i=new Date(e);i.setDate(e.getDate()+o);const c=this.getWeekDayAbbreviation(i.getDay()),u=[];for(let d=0;d<24;d++){const p=new Date(i);p.setHours(d),u.push({date:p,inactive:!0})}this.days.push({label:c,hours:u})}}getWeekDayAbbreviation(e){switch(e){case 0:return"So";case 1:return"Mo";case 2:return"Tu";case 3:return"We";case 4:return"Th";case 5:return"Fr";case 6:return"Sa"}}toDate(e){return new Date(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-road-closures"]],inputs:{roadClosures:"roadClosures"},decls:8,vars:4,consts:[["id","week"],["id","scala"],["class","scala-item",4,"ngFor","ngForOf"],["class","day",4,"ngFor","ngForOf"],["id","summary"],["class","summary-item",4,"ngFor","ngForOf"],[1,"scala-item"],[1,"day"],[1,"column"],["class","hour inactive",3,"ngClass",4,"ngFor","ngForOf"],[1,"label"],[1,"hour","inactive",3,"ngClass"],[1,"summary-item"],["class","summary-type primary-text",4,"ngIf"],["class","summary-type secondary-text",4,"ngIf"],[1,"summary-date"],[1,"summary-time"],[1,"summary-type","primary-text"],[1,"summary-type","secondary-text"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-card")(1,"ion-card-content")(2,"div",0)(3,"div",1),t.YNc(4,P,2,1,"div",2),t.qZA(),t.YNc(5,D,5,2,"div",3),t.qZA(),t.TgZ(6,"div",4),t.YNc(7,F,7,5,"div",5),t.qZA()()()),2&e&&(t.xp6(4),t.Q6J("ngForOf",t.DdM(3,J)),t.xp6(1),t.Q6J("ngForOf",o.days),t.xp6(2),t.Q6J("ngForOf",o.roadClosures))},dependencies:[l.mk,l.sg,l.O5,a.PM,a.FN],styles:["#week[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between}.day[_ngcontent-%COMP%]{width:7%;display:flex;flex-direction:column}.label[_ngcontent-%COMP%]{width:100%;text-align:center;font-size:smaller}.hour[_ngcontent-%COMP%]{width:100%;height:.5rem}.inactive[_ngcontent-%COMP%]{background:var(--ion-background-color)}.primary[_ngcontent-%COMP%]{background:var(--ion-color-primary)}.secondary[_ngcontent-%COMP%]{background:var(--ion-color-secondary)}.primary-text[_ngcontent-%COMP%]{color:var(--ion-color-primary)}.secondary-text[_ngcontent-%COMP%]{color:var(--ion-color-secondary)}.scala-item[_ngcontent-%COMP%]{height:1.5rem}.summary-item[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-between}.summary-type[_ngcontent-%COMP%]{width:4rem}"]}),n})();const b=["overviewContent"];function Q(n,r){if(1&n&&t._UZ(0,"app-event-list-entry",13),2&n){const e=t.oxw(2);t.Q6J("event",e.nextEvent)}}function I(n,r){if(1&n&&t._UZ(0,"app-launch-list-entry",14),2&n){const e=t.oxw(2);t.Q6J("launch",e.nextLaunch)}}function N(n,r){if(1&n&&(t.TgZ(0,"div",10)(1,"div",5),t._uU(2,"Up next"),t.qZA(),t.YNc(3,Q,1,1,"app-event-list-entry",11),t.YNc(4,I,1,1,"app-launch-list-entry",12),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",e.nextEvent),t.xp6(1),t.Q6J("ngIf",e.nextLaunch)}}function E(n,r){1&n&&t._UZ(0,"app-starship-update",15),2&n&&t.Q6J("update",r.$implicit)}const Y=[{path:"",component:(()=>{class n{constructor(e){this.store=e}ionViewDidEnter(){this.content.scrollToPoint(0,this.store.overviewScrollY,250)}logScrolling(e){this.store.overviewScrollY=e.detail.currentY}ngOnInit(){this.determineNextUpcoming()}determineNextUpcoming(){if(this.store.dashboard.upcoming.launches.length>0||this.store.dashboard.upcoming.events.length>0){const e=this.store.dashboard.upcoming.launches[0],o=this.store.dashboard.upcoming.events[0],i=e?new Date(e.net):new Date(0),c=o?new Date(o.date):new Date(0);i.getTime()>c.getTime()?(this.nextLaunch=e,this.nextEvent=void 0):i.getTime()<c.getTime()&&(this.nextLaunch=void 0,this.nextEvent=o)}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_.s))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-overview"]],viewQuery:function(e,o){if(1&e&&(t.Gf(b,5),t.Gf(a.ju,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.content=i.first),t.iGM(i=t.CRH())&&(o.infiniteScroll=i.first)}},decls:14,vars:5,consts:[[3,"scrollEvents","fullscreen","ionScroll"],["overviewContent",""],["slot","fixed",3,"ionRefresh"],["id","upcoming","class","section",4,"ngIf"],["id","updates",1,"section"],[1,"section-title"],[1,"horizontal-scroll-wrapper"],["class","horizontal-scroll-item",3,"update",4,"ngFor","ngForOf"],["id","closures",1,"section"],[3,"roadClosures"],["id","upcoming",1,"section"],[3,"event",4,"ngIf"],[3,"launch",4,"ngIf"],[3,"event"],[3,"launch"],[1,"horizontal-scroll-item",3,"update"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-content",0,1),t.NdJ("ionScroll",function(c){return o.logScrolling(c)}),t.TgZ(2,"ion-refresher",2),t.NdJ("ionRefresh",function(c){return o.store.loadDashboard(c)}),t._UZ(3,"ion-refresher-content"),t.qZA(),t.YNc(4,N,5,2,"div",3),t.TgZ(5,"div",4)(6,"div",5),t._uU(7,"Recent Updates"),t.qZA(),t.TgZ(8,"div",6),t.YNc(9,E,1,1,"app-starship-update",7),t.qZA()(),t.TgZ(10,"div",8)(11,"div",5),t._uU(12,"Upcoming Road-Closures"),t.qZA(),t._UZ(13,"app-road-closures",9),t.qZA()()),2&e&&(t.Q6J("scrollEvents",!0)("fullscreen",!0),t.xp6(4),t.Q6J("ngIf",o.store.dashboard.upcoming.launches.length>0||o.store.dashboard.upcoming.events.length>0),t.xp6(5),t.Q6J("ngForOf",o.store.dashboard.updates),t.xp6(4),t.Q6J("roadClosures",o.store.dashboard.road_closures))},dependencies:[l.sg,l.O5,a.W2,a.nJ,a.Wo,w.G,C.Y,Z,R],styles:[".section-title[_ngcontent-%COMP%]{text-align:center;font-size:x-large;border-bottom:1px solid var(--ion-text-color)}.section[_ngcontent-%COMP%]{margin-left:1rem;margin-right:1rem}.horizontal-scroll-wrapper[_ngcontent-%COMP%]{display:flex;overflow:auto}.horizontal-scroll-item[_ngcontent-%COMP%]{min-width:21rem;display:inline-block}"]}),n})()}];let q=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.Bz.forChild(Y),g.Bz]}),n})();var z=s(763),L=s(6655);let j=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[f],imports:[l.ez,a.Pc]}),n})(),G=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.ez,a.Pc]}),n})(),B=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.ez,y.u5,a.Pc,q,z.A,L.P,j,G]}),n})()}}]);